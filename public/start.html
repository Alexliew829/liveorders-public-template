// pages/start.js
import Head from "next/head";

export default function StartListener() {
  const start = async () => {
    const res = await fetch("/api/startOrderListener", { method: "POST" });
    const data = await res.json();
    alert(data.success ? `✅ 成功启动监听\n已写入 ${data.inserted} 条留言` : `⚠️ 错误：${JSON.stringify(data)}`);
  };

  return (
    <>
      <Head>
        <title>启动监听</title>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-title" content="启动监听" />
        <link rel="apple-touch-icon" href="/peacock-icon.png" />
      </Head>
      <div style={{ height: "100vh", display: "flex", justifyContent: "center", alignItems: "center", background: "#f3f3f3" }}>
        <button
          onClick={start}
          style={{
            backgroundColor: "#2e7d32",
            color: "white",
            fontSize: "1.5rem",
            padding: "16px 36px",
            borderRadius: "16px",
            border: "none",
            display: "flex",
            gap: "12px",
            boxShadow: "0 6px 12px rgba(0,0,0,0.15)"
          }}
        >
          <img src="/peacock-icon.png" alt="图标" style={{ width: 28, height: 28 }} />
          启动监听系统
        </button>
      </div>
    </>
  );
}
